数据库设计

⏺ -- 连接配置表
  CREATE TABLE connections (
      Id TEXT PRIMARY KEY,        -- 32位无横杠UUID
      Name TEXT NOT NULL UNIQUE,  -- 连接名称
      Port INTEGER NOT NULL UNIQUE, -- 端口号（新增连接时自动分配，从502开始递增）
      ProtocolType INTEGER NOT NULL DEFAULT 0 -- 协议类型：0=Modbus RTU Over TCP（默认），1=Modbus TCP
  );

  -- 从机配置表
  CREATE TABLE slaves (
      Id TEXT PRIMARY KEY,            -- 32位无横杠UUID
      ConnId TEXT NOT NULL,          -- 关联连接ID
      Name TEXT NOT NULL,             -- 从机名称
      SlaveId INTEGER NOT NULL,       -- 从机地址（1-247）

      FOREIGN KEY (ConnId) REFERENCES connections(Id) ON DELETE CASCADE,
      UNIQUE(ConnId, SlaveId),       -- 同连接下从机地址唯一
      UNIQUE(ConnId, Name)           -- 同连接下从机名称唯一
  );

  -- 寄存器数据表
  CREATE TABLE registers (
      Id TEXT PRIMARY KEY,            -- 32位无横杠UUID
      SlaveId TEXT NOT NULL,         -- 关联从机ID
      StartAddr INTEGER NOT NULL,     -- 起始逻辑地址
      HexData TEXT NOT NULL,          -- 连续寄存器的16进制字符串
      Names TEXT NOT NULL DEFAULT '', -- 逗号分隔的寄存器名称（可选，用于前端显示）
      Coefficients TEXT NOT NULL DEFAULT '', -- 逗号分隔的显示系数（可选，默认1.0）

      FOREIGN KEY (SlaveId) REFERENCES slaves(Id) ON DELETE CASCADE,
      UNIQUE(SlaveId, StartAddr)     -- 同从机下起始地址唯一
  );

  -- 索引
  CREATE INDEX idx_slaves_conn ON slaves(ConnId);
  CREATE INDEX idx_registers_slave ON registers(SlaveId);
  CREATE INDEX idx_registers_addr ON registers(SlaveId, StartAddr);

## 寄存器显示配置

### Names 字段说明
- **格式**：逗号分隔的字符串，对应 hexdata 中每个寄存器的显示名称
- **示例**：`"Temperature,Humidity,Pressure"` 或 `"温度,,压力"` (中间空名称使用空字符串)
- **用途**：前端显示时将原始数值替换为有意义的标签
- **可选性**：可为空字符串，表示不使用自定义名称

### Coefficients 字段说明  
- **格式**：逗号分隔的数字字符串，对应每个寄存器的显示系数
- **示例**：`"0.1,1.0,0.01"` 或 `"0.1,,2.0"` (空位置默认为1.0)
- **用途**：前端显示时将原始值乘以对应系数进行单位转换
- **默认值**：空字符串时所有系数默认为1.0

### 使用示例
```sql
-- hexdata="01020304" 表示2个寄存器值：0x0102, 0x0304
INSERT INTO registers (Id, SlaveId, StartAddr, HexData, Names, Coefficients) 
VALUES ('...', '...', 40001, '01020304', 'Temperature,Humidity', '0.1,0.01');

-- 前端显示效果：
-- 寄存器40001: Temperature = 258 * 0.1 = 25.8
-- 寄存器40002: Humidity = 772 * 0.01 = 7.72
```
